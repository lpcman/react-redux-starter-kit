<!doctype html>
<html class="no-js" lang="zh">
<head>
    <meta charset="utf-8">
    <title>智慧家庭</title>
    <meta name="description" content="">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="cleartype" content="on">
</head>
<body>
    <script>

        window.JSBRIAGE = (function () {

            var funcSet = {};

            function push(key, func) {
                if(funcSet[key]){
                    console.error("JSBRIAGE: same name '"+ key +"' exist in funcset.");
                }else{
                    funcSet[key] = func;
                }
            }

            function rmItem(key) {
                if(funcSet[key]){
                    delete funcSet[key];
                }else{
                    console.error("JSBRIAGE: no name '"+ key +"' in funcset.");
                }
            }

            function getItem(key) {
                if(funcSet[key]){
                    return funcSet[key];
                }else{
                    console.error("JSBRIAGE: no name '"+ key +"' in funcset.");
                }
            }

            return {
                push: push,
                getItem: getItem,
                rmItem: rmItem,
                funcSet: funcSet
           }
        }());

        function JsCall(funcName, data) {
            console.log("[JS Bridge invoke]----->");
            console.log(funcName);
            console.log(data);
            alert(data);

            if(window.JSBRIAGE.getItem(funcName)){
                try {
                    data = JSON.parse(data);
                }catch (e){
                    console.log("[JS Bridge invoke]:" + e);
                }
                window.JSBRIAGE.getItem(funcName)(data);
            }else{
                console.log("[JS Bridge invoke]: no function "+ funcName);
            }
        }

        let debounce = function(func, wait, immediate) {
            var timeout;
            return function() {
                var context = this, args = arguments;
                var later = function() {
                    timeout = null;
                    if (!immediate) func.apply(context, args);
                };
                var callNow = immediate && !timeout;
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
                if (callNow) func.apply(context, args);
            };
        };

        // Create the listener function
        var updateLayout = debounce(function(e) {

            // Does all the layout updating here

        }, 500); // Maximum run of once per 500 milliseconds

        // Add the event listener
        window.addEventListener("resize", updateLayout, false);

    </script>
    <div id="root" style="min-height: 100%; display:flex; flex-direction: column;"></div>
</body>
</html>
